<Window x:Class="VisionPro.App.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:views="clr-namespace:VisionPro.App.Views"
        Title="VisionPro - Industrial Vision Inspection Platform" 
        Height="900" Width="1400"
        WindowState="Maximized"
        Background="{StaticResource BackgroundBrush}">
    
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>
        
        <!-- Header -->
        <Border Grid.Row="0" Background="{StaticResource SurfaceBrush}" Padding="16,12">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                
                <!-- Logo / Title -->
                <StackPanel Grid.Column="0" Orientation="Horizontal">
                    <TextBlock Text="🔬" FontSize="24" VerticalAlignment="Center" Margin="0,0,8,0"/>
                    <TextBlock Text="VisionPro" FontSize="20" FontWeight="Bold" 
                               Foreground="{StaticResource TextPrimaryBrush}" VerticalAlignment="Center"/>
                </StackPanel>
                
                <!-- Current Product -->
                <StackPanel Grid.Column="1" Orientation="Horizontal" HorizontalAlignment="Center" VerticalAlignment="Center">
                    <TextBlock Text="Current Product: " Foreground="{StaticResource TextSecondaryBrush}"/>
                    <TextBlock Text="{Binding CurrentProductName, FallbackValue='No Product Loaded'}" 
                               Foreground="{StaticResource TextPrimaryBrush}" FontWeight="SemiBold"/>
                </StackPanel>
                
                <!-- Status Indicators -->
                <StackPanel Grid.Column="2" Orientation="Horizontal" VerticalAlignment="Center">
                    <Border Background="{Binding CameraStatusBrush, FallbackValue={StaticResource NGBrush}}" 
                            CornerRadius="4" Padding="8,4" Margin="8,0">
                        <TextBlock Text="Camera" Foreground="White" FontSize="11"/>
                    </Border>
                    <Border Background="{Binding PlcStatusBrush, FallbackValue={StaticResource WarningBrush}}" 
                            CornerRadius="4" Padding="8,4" Margin="0,0,8,0">
                        <TextBlock Text="PLC" Foreground="White" FontSize="11"/>
                    </Border>
                    <TextBlock Text="{Binding CurrentTime, StringFormat='{}{0:HH:mm:ss}'}" 
                               Foreground="{StaticResource TextSecondaryBrush}" 
                               VerticalAlignment="Center" FontFamily="Consolas"/>
                </StackPanel>
            </Grid>
        </Border>
        
        <!-- Main Content -->
        <TabControl Grid.Row="1" SelectedIndex="{Binding SelectedTabIndex}">
            <TabItem Header="📷 Live View">
                <views:LiveViewControl/>
            </TabItem>
            <TabItem Header="🔀 Flow Editor">
                <views:FlowEditorControl/>
            </TabItem>
            <TabItem Header="✏️ ROI Editor">
                <views:ROIEditorControl/>
            </TabItem>
            <TabItem Header="📦 Product Manager">
                <views:ProductManagerControl/>
            </TabItem>
            <TabItem Header="📊 History">
                <views:HistoryViewControl/>
            </TabItem>
            <TabItem Header="⚡ IO Monitor">
                <views:IOMonitorControl/>
            </TabItem>
        </TabControl>
        
        <!-- Status Bar -->
        <Border Grid.Row="2" Background="{StaticResource SurfaceBrush}" Padding="16,8">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                
                <!-- Last Result -->
                <StackPanel Grid.Column="0" Orientation="Horizontal">
                    <TextBlock Text="Last Result: " Foreground="{StaticResource TextSecondaryBrush}" VerticalAlignment="Center"/>
                    <Border Background="{Binding LastResultBrush, FallbackValue={StaticResource OKBrush}}" 
                            CornerRadius="4" Padding="12,4">
                        <TextBlock Text="{Binding LastResultText, FallbackValue='OK'}" 
                                   Foreground="White" FontWeight="Bold"/>
                    </Border>
                </StackPanel>
                
                <!-- Statistics -->
                <StackPanel Grid.Column="1" Orientation="Horizontal" HorizontalAlignment="Center">
                    <TextBlock Foreground="{StaticResource TextSecondaryBrush}" Margin="16,0">
                        <Run Text="Total: "/><Run Text="{Binding TotalCount, FallbackValue=0}" FontWeight="Bold"/>
                    </TextBlock>
                    <TextBlock Foreground="{StaticResource OKBrush}" Margin="16,0">
                        <Run Text="OK: "/><Run Text="{Binding OkCount, FallbackValue=0}" FontWeight="Bold"/>
                    </TextBlock>
                    <TextBlock Foreground="{StaticResource NGBrush}" Margin="16,0">
                        <Run Text="NG: "/><Run Text="{Binding NgCount, FallbackValue=0}" FontWeight="Bold"/>
                    </TextBlock>
                    <TextBlock Foreground="{StaticResource TextSecondaryBrush}" Margin="16,0">
                        <Run Text="Yield: "/><Run Text="{Binding Yield, Mode=OneWay, StringFormat='{}{0:F1}%', FallbackValue='100.0%'}" FontWeight="Bold"/>
                    </TextBlock>
                </StackPanel>
                
                <!-- Cycle Time -->
                <TextBlock Grid.Column="2" Foreground="{StaticResource TextSecondaryBrush}" Margin="16,0" VerticalAlignment="Center">
                    <Run Text="Cycle Time: "/><Run Text="{Binding CycleTimeMs, StringFormat='{}{0}ms', FallbackValue='--'}" FontWeight="Bold"/>
                </TextBlock>
                
                <!-- Mode -->
                <Border Grid.Column="3" Background="{Binding ModeBrush, FallbackValue={StaticResource SecondaryBrush}}" 
                        CornerRadius="4" Padding="12,4">
                    <TextBlock Text="{Binding ModeText, FallbackValue='SETUP'}" 
                               Foreground="White" FontWeight="Bold"/>
                </Border>
            </Grid>
        </Border>
    </Grid>
</Window>
